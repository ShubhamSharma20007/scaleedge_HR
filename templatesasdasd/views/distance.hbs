<!DOCTYPE html>
<html>

<head>
    <title>ScaleEdge</title>
    <link rel="stylesheet" href="/assets/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="/assets/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/sweetalert/dist/sweetalert.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="shortcut icon" href="/assets/images/favicon.ico" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.8/xlsx.full.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>

<body>
    <div class="container-scroller">
        {{>topbar}}
        <div class="container-fluid page-body-wrapper">
            {{> sidebar}}
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="page-header">
                        <h3 class="page-title">
                            <span class="page-title-icon bg-gradient-primary text-white me-2">
                                <i class="mdi mdi-arrow-left" onclick="goBack()" title="Back"></i>
                <script>
                  function goBack() {
                    window.history.back();
                  }
                </script>
                            </span> Report
                        </h3>
                        <nav aria-label="breadcrumb">
                            
                        </nav>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="row justify-content-center">
                                        <div class="form-sample">
                                            <div class="table-responsive" style="overflow-y: auto; max-height: 400px;">
                                                <table id="userTable" class="table table-bordered">
                                                    <thead style="position: sticky; top: 0; background-color: white;">
                                                        <tr>
                                                            <th scope="col">Name</th>
                                                            <th scope="col">Date</th>
                                                            <th scope="col" hidden>In Latitude</th>
                                                            <th scope="col" hidden>In Longitude</th>
                                                            <th scope="col">Punch In Distance</th>
                                                            <th scope="col" hidden>Out Latitude</th>
                                                            <th scope="col" hidden>Out Longitude</th>
                                                            <th scope="col">Punch Out Distance</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="userTableBody">
                                                        {{#each rows}}
                                                        <tr class="user-row">
                                                            <td scope="row">{{this.user_name}}</td>
                                                            <td>{{this.date_column}}</td>
                                                            <td hidden>{{this.user_lat_in}}</td>
                                                            <td hidden>{{this.user_lon_in}}</td>
                                                            <td class="punch-in-distance"
                                                                style="cursor: pointer; color:#dc4c64; text-decoration:underline">
                                                                {{this.punchin_distance}}</td>
                                                            <td hidden>{{this.user_lat_out}}</td>
                                                            <td hidden>{{this.user_lon_out}}</td>
                                                            <td class="punch-out-distance"
                                                                style="cursor: pointer; color:#dc4c64; text-decoration:underline">
                                                                {{this.punchout_distance}}</td>
                                                        </tr>
                                                        {{/each}}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <script src="assets/vendors/js/vendor.bundle.base.js"></script>
        <script src="assets/vendors/chart.js/Chart.min.js"></script>
        <script src="assets/js/off-canvas.js"></script>
        <script src="assets/js/hoverable-collapse.js"></script>
        <script src="assets/js/misc.js"></script>
        <script src="assets/js/dashboard.js"></script>
        <script src="assets/js/todolist.js"></script>
        <script src="/assets/js/jquery-2.1.1.min.js"></script>
</body>

</html>

<script>
    // Wait for the document to be ready
    $(document).ready(function () {
        // Add a click event listener to the punch in distance cells
        $('.punch-in-distance').on('click', function () {
            // Get the latitude and longitude values from the current row
            var lat = $(this).closest('tr').find('td:eq(2)').text(); // Index 2 is the In Latitude column
            var lon = $(this).closest('tr').find('td:eq(3)').text(); // Index 3 is the In Longitude column

            // Open Google Maps with the specified coordinates
            window.open('https://www.google.com/maps?q=' + lat + ',' + lon, '_blank');
        });
    });
</script>

<script>
    // Wait for the document to be ready
    $(document).ready(function () {
        // Add a click event listener to the punch in distance cells
        $('.punch-out-distance').on('click', function () {
            // Get the latitude and longitude values from the current row
            var lat = $(this).closest('tr').find('td:eq(5)').text(); // Index 2 is the In Latitude column
            var lon = $(this).closest('tr').find('td:eq(6)').text(); // Index 3 is the In Longitude column

            // Open Google Maps with the specified coordinates
            window.open('https://www.google.com/maps?q=' + lat + ',' + lon, '_blank');
        });
    });
</script>