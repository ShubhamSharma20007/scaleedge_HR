<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScaleEdge</title>
    <link rel="stylesheet" href="stylesheets/usermanagment.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/sweetalert/dist/sweetalert.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <div class="container">
        <div class="navigation">
            {{> sidebar}}
        </div>
        <div class="main">
            {{> topbar}}
            <div class="userSelectBox" style="margin: auto 27px;margin-top:25px">
                <label for="userSelect">Select User:</label>
                <select id="userSelect" onchange="filterData()">
                    <option value="">All Users</option>
                    {{#each users}}
                    <option value="{{this}}">{{this}}</option>
                    {{/each}}
                </select>
            </div>
            <div class="details">
                <div class="recentOrders">
                    <div class="cardHeader">
                        <h2>Lead List</h2>
                    </div>
                    <table id="userDataTable" class="table table-bordered">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Name</th>
                                <th scope="col">Assign</th>
                                <th scope="col">Latitude</th>
                                <th scope="col">Longitude</th>
                                <th scope="col">Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>

                        <tbody>
                            {{#each data}}
                            <tr>
                                <td>{{name}}</td>
                                <td class="assign-cell">{{assign}}</td>
                                <td class="latitude-cell">{{latitude}}</td>
                                <td class="longitude-cell">{{longitude}}</td>
                                <td>
                                    {{#ifEquals status "Hot"}}
                                    <span class="status status-red" style="color: red;">{{status}}</span>
                                    {{else ifEquals status "Hold"}}
                                    <span class="status status-blue" style="color: blue;">{{status}}</span>
                                    {{else ifEquals status "Working"}}
                                    <span class="status status-yellow" style="color:forestgreen;">{{status}}</span>
                                    {{else}}
                                    <span class="status">{{status}}</span>
                                    {{/ifEquals}}
                                </td>
                                <td>
                                    {{#ifEquals flag "green"}}
                                    <span class="flag flag-green" style="color: green;"><ion-icon
                                            name="flag-outline"></ion-icon></span>
                                    {{else ifEquals flag "red"}}
                                    <span class="flag flag-red" style="color: red;"><ion-icon
                                            name="flag-outline"></ion-icon></span>
                                    {{else}}
                                    <span class="flag">{{flag}}</span>
                                    {{/ifEquals}}
                                </td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="/javascripts/dashboard.js"></script>
    <script src="/javascripts/usermanagment.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
<style>
    .dropdown {
        position: relative;
        display: inline-block;
        margin-top: 30px;
        margin-left: 25px;
        margin-bottom: 26px;
    }

    .dropbtn {
        background-color: #3498db;
        color: white;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        cursor: pointer;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1;
    }

    .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        cursor: pointer;
    }

    .dropdown-content a:hover {
        background-color: #ddd;
    }

    .show {
        display: block;
    }

    .input-container {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }

    .styled-input {
        width: 120px;
        height: fit-content;
        margin: 10px;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #ccc;
        background-color: white;
        border-radius: 4px;
    }

    .userSelectBox label {
        font-weight: bold;
        margin-right: 8px;
    }

    .userSelectBox select {
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 14px;
        width: 200px;
        cursor: pointer;
    }
</style>
<script>
    function filterData() {
        var selectedUserName = document.getElementById("userSelect").value;
        var rows = document.querySelectorAll("#userDataTable tbody tr");

        for (var i = 0; i < rows.length; i++) {
            var assignCell = rows[i].querySelector(".assign-cell");
            if (assignCell) {
                var assignValue = assignCell.textContent || assignCell.innerText;
                if (selectedUserName === "" || assignValue === selectedUserName) {
                    rows[i].style.display = "table-row";
                } else {
                    rows[i].style.display = "none";
                }
            }
        }
    }
</script>

</html>